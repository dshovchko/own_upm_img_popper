# own_upm_img_popper v4.8.1.20200726
# More powerful image display
# Dmitry Shovchko
# http://github.com/dshovchko

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMDp7czo3OiJ2ZXJzaW9uIjtzOjE0OiI0LjguMS4yMDIwMDcyNiI7czo2OiJhdXRob3Ii
O3M6MTU6IkRtaXRyeSBTaG92Y2hrbyI7czoxMDoiYXV0aG9yX3VyaSI7czoyNzoiaHR0cDov
L2dpdGh1Yi5jb20vZHNob3ZjaGtvIjtzOjExOiJkZXNjcmlwdGlvbiI7czoyNzoiTW9yZSBw
b3dlcmZ1bCBpbWFnZSBkaXNwbGF5IjtzOjQ6InR5cGUiO2k6NDtzOjU6ImZsYWdzIjtzOjE6
IjAiO3M6NDoibmFtZSI7czoxODoib3duX3VwbV9pbWdfcG9wcGVyIjtzOjQ6ImhlbHAiO3M6
MDoiIjtzOjQ6ImNvZGUiO3M6MzM2MTk6IgppZiAodHhwaW50ZXJmYWNlID09ICdhZG1pbicp
Cgl7CgkJdXBtX2ltZ19wb3BwZXJfaW5zdGFsbCgpOwoKCQlhZGRfcHJpdnMoJ3VwbV9pbWdf
cG9wcGVyJywgJzEsMiwzLDQsNScpOwoJCXJlZ2lzdGVyX2NhbGxiYWNrKCd1cG1faW1nX3Bv
cHBlcicsICd1cG1faW1nX3BvcHBlcicpOwoKCQlhZGRfcHJpdnMoJ3VwbV9pbWdfcG9wcGVy
X2xpbmsnLCAnMSwyLDMsNCw1Jyk7CgkJcmVnaXN0ZXJfY2FsbGJhY2soJ3VwbV9pbWdfcG9w
cGVyX2xpbmsnLCAnYXJ0aWNsZScpOwoKCQlhZGRfcHJpdnMoJ3VwbV9pbWdfcG9wcGVyX2pz
JywgJzEsMiwzLDQsNScpOwoJCXJlZ2lzdGVyX2NhbGxiYWNrKCd1cG1faW1nX3BvcHBlcl9q
cycsICd1cG1faW1nX3BvcHBlcl9qcycsICcnLCAxKTsKCgkJYWRkX3ByaXZzKCd1cG1faW1n
X3BvcHBlcl9wcmVmcycsICcxLDInKTsKCQlyZWdpc3Rlcl90YWIoJ2V4dGVuc2lvbnMnLCAn
dXBtX2ltZ19wb3BwZXJfcHJlZnMnLCAndXBtX2ltZ19wb3BwZXInKTsKCQlyZWdpc3Rlcl9j
YWxsYmFjaygndXBtX2ltZ19wb3BwZXJfcHJlZnMnLCAndXBtX2ltZ19wb3BwZXJfcHJlZnMn
KTsKCX0KCi8vIC0tLQoKCWZ1bmN0aW9uIHVwbV9pbWdfcG9wcGVyKCkKCXsKCQlnbG9iYWwg
JHN0ZXA7CgoJCWlmICgkc3RlcCA9PSAndXBtX2ltZ19wb3BwZXJfY2hhbmdlX3BhZ2VieScp
CgkJewoJCQlldmVudF9jaGFuZ2VfcGFnZWJ5KCdpbWFnZScpOwoJCQkkR0xPQkFMU1sncHJl
ZnMnXSA9IGdldF9wcmVmcygpOwoJCX0KCgkJdXBtX2ltZ19wb3BwZXJfbGlzdCgpOwoJfQoK
Ly8gLS0tCgoJZnVuY3Rpb24gdXBtX2ltZ19wb3BwZXJfbGlzdCgkbWVzc2FnZSA9ICcnKQoJ
ewoJCWdsb2JhbCAkcHJlZnM7CgoJCXBhZ2V0b3AodXBtX2ltZ19wb3BwZXJfZ1R4dCgnaW1h
Z2Vfc2VsZWN0b3InKSwgJG1lc3NhZ2UpOwoKCQkkcGF0aF90b19zaXRlID0gJHByZWZzWydw
YXRoX3RvX3NpdGUnXTsKCQkkaW1nX2RpciA9ICRwcmVmc1snaW1nX2RpciddOwoKCQlpZiAo
IWRlZmluZWQoJ0lNUEFUSCcpKQoJCXsKCQkJZGVmaW5lKCdJTVBBVEgnLCAkcGF0aF90b19z
aXRlLicvJy4kaW1nX2Rpci4nLycpOwoJCX0KCgkJZWNobyA8PDxjc3MKPHN0eWxlIHR5cGU9
InRleHQvY3NzIj4KPCEtLQpsYWJlbHtjb2xvcjojMDAwO2N1cnNvcjpwb2ludGVyO30KdWx7
bWFyZ2luOjA7cGFkZGluZzowO2xpc3Qtc3R5bGU6bm9uZTt9Cmxpe21hcmdpbjowIDAgMnB4
IDA7cGFkZGluZzowO30KcHttYXJnaW46NXB4IDA7cGFkZGluZzowO30KLnJpZ2h0e3RleHQt
YWxpZ246cmlnaHQ7fQouY2VudGVye21hcmdpbjowIGF1dG87dGV4dC1hbGlnbjpjZW50ZXI7
fQojbm97bWFyZ2luLWxlZnQ6MmVtO30KI3JldHVybiwjc3VjY2VzcywjZmFpbGVke3BhZGRp
bmc6MWVtO3RleHQtYWxpZ246Y2VudGVyO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6
NXB4IHNvbGlkICNmYzM7fQotLT4KPC9zdHlsZT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFz
Y3JpcHQiIHNyYz0iaW5kZXgucGhwP2V2ZW50PXVwbV9pbWdfcG9wcGVyX2pzJiMzODtuYW1l
PXBvcCI+PC9zY3JpcHQ+CmNzczsKCgkJZXh0cmFjdChncHNhKGFycmF5KCdwYWdlJywgJ3Nv
cnQnLCAnZGlyJywgJ2NyaXQnLCAnc2VhcmNoX21ldGhvZCcpKSk7CgoJCSRkaXIgPSAoJGRp
ciA9PSAnZGVzYycpID8gJ2Rlc2MnIDogJ2FzYyc7CgoJCXN3aXRjaCAoJHNvcnQpCgkJewoJ
CQljYXNlICdpZCc6CgkJCQkkc29ydF9zcWwgPSAiaWQgJGRpciI7CgkJCWJyZWFrOwoKCQkJ
Y2FzZSAnbmFtZSc6CgkJCQkkc29ydF9zcWwgPSAibmFtZSAkZGlyIjsKCQkJYnJlYWs7CgoJ
CQljYXNlICd0aHVtYm5haWwnOgoJCQkJJHNvcnRfc3FsID0gInRodW1ibmFpbCAkZGlyLCBp
ZCBhc2MiOwoJCQlicmVhazsKCgkJCWNhc2UgJ2NhdGVnb3J5JzoKCQkJCSRzb3J0X3NxbCA9
ICJjYXRlZ29yeSAkZGlyLCBpZCBhc2MiOwoJCQlicmVhazsKCgkJCWNhc2UgJ2RhdGUnOgoJ
CQkJJHNvcnRfc3FsID0gImRhdGUgJGRpciwgaWQgYXNjIjsKCQkJYnJlYWs7CgoJCQljYXNl
ICdhdXRob3InOgoJCQkJJHNvcnRfc3FsID0gImF1dGhvciAkZGlyLCBpZCBhc2MiOwoJCQli
cmVhazsKCgkJCWRlZmF1bHQ6CgkJCQkkZGlyID0gJ2Rlc2MnOwoJCQkJJHNvcnRfc3FsID0g
ImlkICRkaXIiOwoJCQlicmVhazsKCQl9CgoJCSRzd2l0Y2hfZGlyID0gKCRkaXIgPT0gJ2Rl
c2MnKSA/ICdhc2MnIDogJ2Rlc2MnOwoKCQkkY3JpdGVyaWEgPSAxOwoKCQlpZiAoJHNlYXJj
aF9tZXRob2QgYW5kICRjcml0KQoJCXsKCQkJJGNyaXRfZXNjYXBlZCA9IGRvU2xhc2goJGNy
aXQpOwoKCQkJJGNyaXRzcWwgPSBhcnJheSgKCQkJCSdpZCcJCT0+ICJpZCA9ICckY3JpdF9l
c2NhcGVkJyIsCgkJCQknbmFtZScJCT0+ICJuYW1lIGxpa2UgJyUkY3JpdF9lc2NhcGVkJSci
LAoJCQkJJ2NhdGVnb3J5Jwk9PiAiY2F0ZWdvcnkgbGlrZSAnJSRjcml0X2VzY2FwZWQlJyIs
CgkJCQknYXV0aG9yJwk9PiAiYXV0aG9yIGxpa2UgJyUkY3JpdF9lc2NhcGVkJSciLAoJCQkJ
J2FsdCcJCT0+ICJhbHQgbGlrZSAnJSRjcml0X2VzY2FwZWQlJyIsCgkJCQknY2FwdGlvbicJ
PT4gImNhcHRpb24gbGlrZSAnJSRjcml0X2VzY2FwZWQlJyIKCQkJKTsKCgkJCWlmIChhcnJh
eV9rZXlfZXhpc3RzKCRzZWFyY2hfbWV0aG9kLCAkY3JpdHNxbCkpCgkJCXsKCQkJCSRjcml0
ZXJpYSA9ICRjcml0c3FsWyRzZWFyY2hfbWV0aG9kXTsKCQkJCSRsaW1pdCA9IDUwMDsKCQkJ
fQoKCQkJZWxzZQoJCQl7CgkJCQkkc2VhcmNoX21ldGhvZCA9ICcnOwoJCQkJJGNyaXQgPSAn
JzsKCQkJfQoJCX0KCgkJZWxzZQoJCXsKCQkJJHNlYXJjaF9tZXRob2QgPSAnJzsKCQkJJGNy
aXQgPSAnJzsKCQl9CgoJCSR0b3RhbCA9IHNhZmVfY291bnQoJ3R4cF9pbWFnZScsICIkY3Jp
dGVyaWEiKTsKCgkJaWYgKCR0b3RhbCA8IDEpCgkJewoJCQlpZiAoJGNyaXRlcmlhICE9IDEp
CgkJCXsKCQkJCWVjaG8gbi51cG1faW1nX3BvcHBlcl9zZWFyY2hfZm9ybSgkY3JpdCwgJHNl
YXJjaF9tZXRob2QsICRzb3J0LCAkZGlyKS4KCQkJCQluLmdyYWYoZ1R4dCgnbm9fcmVzdWx0
c19mb3VuZCcpLCAnIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IicpOwoJCQl9CgoJCQll
bHNlCgkJCXsKCQkJCWVjaG8gbi5ncmFmKGdUeHQoJ25vX2ltYWdlc19yZWNvcmRlZCcpLCAn
IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IicpOwoJCQl9CgoJCQlyZXR1cm47CgkJfQoK
CQllY2hvIHVwbV9pbWdfcG9wcGVyX29wdGlvbnNfZm9ybSgpOwoKCQkkbGltaXQgPSBtYXgo
JHByZWZzWydpbWFnZV9saXN0X3BhZ2VieSddLCAxNSk7CgoJCWxpc3QoJHBhZ2UsICRvZmZz
ZXQsICRudW1QYWdlcykgPSBwYWdlcigkdG90YWwsICRsaW1pdCwgJHBhZ2UpOwoKCQllY2hv
IHVwbV9pbWdfcG9wcGVyX3NlYXJjaF9mb3JtKCRjcml0LCAkc2VhcmNoX21ldGhvZCwgJHNv
cnQsICRkaXIpOwoKCQkkcnMgPSBzYWZlX3Jvd3Nfc3RhcnQoJyosIHVuaXhfdGltZXN0YW1w
KGRhdGUpIGFzIHVEYXRlJywgJ3R4cF9pbWFnZScsCgkJCSIkY3JpdGVyaWEgb3JkZXIgYnkg
JHNvcnRfc3FsIGxpbWl0ICRvZmZzZXQsICRsaW1pdAoJCSIpOwoKCQlpZiAoJHJzKQoJCXsK
CQkJJHNvcnRfbGluayA9ICd1cG1faW1nX3BvcHBlcicuYS4nYm09dHJ1ZSc7CgoJCQllY2hv
IG4ubi5zdGFydFRhYmxlKCdsaXN0JykuCgkJCQluLnRyKAoJCQkJCWNvbHVtbl9oZWFkKCdJ
RCcsICdpZCcsICRzb3J0X2xpbmssIHRydWUsICRzd2l0Y2hfZGlyLCAkY3JpdCwgJHNlYXJj
aF9tZXRob2QpLgoJCQkJCWNvbHVtbl9oZWFkKCduYW1lJywgJ25hbWUnLCAkc29ydF9saW5r
LCB0cnVlLCAkc3dpdGNoX2RpciwgJGNyaXQsICRzZWFyY2hfbWV0aG9kKS4KCQkJCQljb2x1
bW5faGVhZCgndGh1bWJuYWlsJywgJ3RodW1ibmFpbCcsICRzb3J0X2xpbmssIHRydWUsICRz
d2l0Y2hfZGlyLCAkY3JpdCwgJHNlYXJjaF9tZXRob2QpLgoJCQkJCWhDZWxsKGdUeHQoJ3By
ZXZpZXcnKSkuCgkJCQkJY29sdW1uX2hlYWQoJ2F1dGhvcicsICdhdXRob3InLCAkc29ydF9s
aW5rLCB0cnVlLCAkc3dpdGNoX2RpciwgJGNyaXQsICRzZWFyY2hfbWV0aG9kKS4KCQkJCQlo
Q2VsbCh1cG1faW1nX3BvcHBlcl9nVHh0KCdpbnNlcnQnKSkuCgkJCQkJKCBmdW5jdGlvbl9l
eGlzdHMoJ3VwbV9pbWFnZScpID8gaENlbGwodXBtX2ltZ19wb3BwZXJfZ1R4dCgnaW5zZXJ0
X3BsdWdpbicpKSA6ICcnICkuCgkJCQkJaENlbGwoKQoJCQkJKTsKCgkJCXdoaWxlICgkYSA9
IG5leHRSb3coJHJzKSkKCQkJewoJCQkJZXh0cmFjdCgkYSk7CgoJCQkJJGVkaXRfdXJsID0g
Jz9ldmVudD1pbWFnZScuYS4nc3RlcD1pbWFnZV9lZGl0Jy5hLidpZD0nLiRpZC5hLidzb3J0
PScuJHNvcnQuCgkJCQkJYS4nZGlyPScuJGRpci5hLidwYWdlPScuJHBhZ2UuYS4nc2VhcmNo
X21ldGhvZD0nLiRzZWFyY2hfbWV0aG9kLmEuJ2NyaXQ9Jy4kY3JpdDsKCgkJCQkkbmFtZSA9
IGVtcHR5KCRuYW1lKSA/IGdUeHQoJ3VubmFtZWQnKSA6ICRuYW1lOwoKCQkJCSR0aHVtYm5h
aWwgPSAoJHRodW1ibmFpbCkgPwoJCQkJCSc8aW1nIHNyYz0iJy5odS4kaW1nX2Rpci4nLycu
JGlkLid0Jy4kZXh0LiciIC8+JyA6CgkJCQkJZ1R4dCgnbm8nKTsKCgkJCQkvLyBnb2QgSSBo
YXRlIGphdmFzY3JpcHQgaW4gcGhwCgoJCQkJJGlkcyA9IG4uJzx1bD4nLm4uCgkJCQkJbi50
Lic8bGk+Jy4kaWQuJzwvbGk+Jy4KCQkJCQluLnQuJzxsaT48YSBocmVmPSInLiRlZGl0X3Vy
bC4nIiBvbmNsaWNrPSJ3YXJuRWRpdEltYWdlKCcuJGlkLicpOyByZXR1cm4gZmFsc2U7Ij4n
LmdUeHQoJ2VkaXQnKS4nPC9hPjwvbGk+Jy4KCQkJCQluLnQuJzxsaT4nLnNhZmVfc3RyZnRp
bWUoJyVkICViICVZICVJOiVNICVwJywgJHVEYXRlKS4nPC9saT4nLgoJCQkJCW4uJzwvdWw+
JzsKCgkJCQkkaW5zZXJ0ID0gbi4nPHVsPicubi4KCQkJCQluLnQuJzxsaT48YSBocmVmPSIj
IiBvbmNsaWNrPSJpbnNlcnRUYWcoXCdhcHBlbmQtYXJ0aWNsZS1pbWFnZVwnLCAnLmNocigz
OSkuJGlkLmNocigzOSkuJyk7IHJldHVybiBmYWxzZTsiPicudXBtX2ltZ19wb3BwZXJfZ1R4
dCgnYXJ0aWNsZV9pbWFnZV9hcHBlbmQnKS4nPC9hPjwvbGk+Jy4KCQkJCQluLnQuJzxsaT48
YSBocmVmPSIjIiBvbmNsaWNrPSJpbnNlcnRUYWcoXCdyZXBsYWNlLWFydGljbGUtaW1hZ2Vc
JywgJy5jaHIoMzkpLiRpZC5jaHIoMzkpLicpOyByZXR1cm4gZmFsc2U7Ij4nLnVwbV9pbWdf
cG9wcGVyX2dUeHQoJ2FydGljbGVfaW1hZ2VfcmVwbGFjZScpLic8L2E+PC9saT4nLgoJCQkJ
CW4udC4nPGxpPjxhIGhyZWY9IiMiIG9uY2xpY2s9Imluc2VydFRhZyhcJ2ltYWdlXCcsICcu
Y2hyKDM5KS4kaWQuY2hyKDM5KS4nKTsgcmV0dXJuIGZhbHNlOyI+Jy51cG1faW1nX3BvcHBl
cl9nVHh0KCdpbWFnZScpLic8L2E+PC9saT4nOwoKCQkJCSRwbHVnaW4gPSBuLic8dWw+Jy5u
LgoJCQkJCW4udC4nPGxpPjxhIGhyZWY9IiMiIG9uY2xpY2s9Imluc2VydFRhZyhcJ3BsdWdp
bi1pbWFnZVwnLCAnLmNocigzOSkuJGlkLmNocigzOSkuJyk7IHJldHVybiBmYWxzZTsiPicu
dXBtX2ltZ19wb3BwZXJfZ1R4dCgnaW1hZ2UnKS4nPC9hPjwvbGk+JzsKCgkJCQlpZiAoJHRo
dW1ibmFpbCkKCQkJCXsKCQkJCQkkaW5zZXJ0IC49IG4udC4nPGxpPjxhIGhyZWY9IiMiIG9u
Y2xpY2s9Imluc2VydFRhZyhcJ3RodW1iXCcsICcuY2hyKDM5KS4kaWQuY2hyKDM5KS4nKTsg
cmV0dXJuIGZhbHNlOyI+Jy5nVHh0KCd0aHVtYm5haWwnKS4nPC9hPjwvbGk+Jy4KCQkJCQkJ
bi50Lic8bGk+PGEgaHJlZj0iIyIgb25jbGljaz0iaW5zZXJ0VGFnKFwncG9wdXBcJywgJy5j
aHIoMzkpLiRpZC5jaHIoMzkpLicpOyByZXR1cm4gZmFsc2U7Ij4nLnVwbV9pbWdfcG9wcGVy
X2dUeHQoJ3BvcHVwJykuJzwvYT48L2xpPic7CgoJCQkJCSRwbHVnaW4gLj0gbi50Lic8bGk+
PGEgaHJlZj0iIyIgb25jbGljaz0iaW5zZXJ0VGFnKFwncGx1Z2luLXRodW1iXCcsICcuY2hy
KDM5KS4kaWQuY2hyKDM5KS4nKTsgcmV0dXJuIGZhbHNlOyI+Jy5nVHh0KCd0aHVtYm5haWwn
KS4nPC9hPjwvbGk+Jy4KCQkJCQkJbi50Lic8bGk+PGEgaHJlZj0iIyIgb25jbGljaz0iaW5z
ZXJ0VGFnKFwncGx1Z2luLXBvcHVwXCcsICcuY2hyKDM5KS4kaWQuY2hyKDM5KS4nKTsgcmV0
dXJuIGZhbHNlOyI+Jy51cG1faW1nX3BvcHBlcl9nVHh0KCdwb3B1cCcpLic8L2E+PC9saT4n
OwoJCQkJfQoKCQkJCSRpbnNlcnQgLj0gbi50Lic8bGk+PGEgaHJlZj0iIyIgb25jbGljaz0i
aW5zZXJ0VGFnKFwndGV4dGlsZVwnLCAnLmNocigzOSkuJGlkLmNocigzOSkuJywgJy5jaHIo
MzkpLiRleHQuY2hyKDM5KS4nLCBcJ1wnLCBcJ1wnLCAnLmNocigzOSkuaHRtbHNwZWNpYWxj
aGFycygkYWx0KS5jaHIoMzkpLicpOyByZXR1cm4gZmFsc2U7Ij5UZXh0aWxlPC9hPjwvbGk+
Jy4KCQkJCQluLnQuJzxsaT48YSBocmVmPSIjIiBvbmNsaWNrPSJpbnNlcnRUYWcoXCd4aHRt
bFwnLCAnLmNocigzOSkuJGlkLmNocigzOSkuJywgJy5jaHIoMzkpLiRleHQuY2hyKDM5KS4n
LCAnLmNocigzOSkuJHcuY2hyKDM5KS4nLCAnLmNocigzOSkuJGguY2hyKDM5KS4nLCAnLmNo
cigzOSkuaHRtbHNwZWNpYWxjaGFycygkYWx0KS5jaHIoMzkpLicsICcuY2hyKDM5KS5odG1s
c3BlY2lhbGNoYXJzKCRjYXB0aW9uKS5jaHIoMzkpLicpOyByZXR1cm4gZmFsc2U7Ij5YSFRN
TDwvYT48L2xpPicuCgkJCQkJbi4nPC91bD4nOwoKCQkJCSRwbHVnaW4gLj0gbi50Lic8bGk+
PGEgaHJlZj0iIyIgb25jbGljaz0iaW5zZXJ0VGFnKFwncGx1Z2luLWN1c3RvbVwnLCAnLmNo
cigzOSkuJGlkLmNocigzOSkuJyk7IHJldHVybiBmYWxzZTsiPicudXBtX2ltZ19wb3BwZXJf
Z1R4dCgnY3VzdG9tX2Zvcm0nKS4nPC9hPjwvbGk+Jy4KCQkJCQluLic8L3VsPic7CgoJCQkJ
JHByZXZpZXcgPSBuLic8dWw+Jy4KCQkJCQluLnQuJzxsaT48YSBocmVmPSIjIiBvbmNsaWNr
PSJtYWtlV2luKCcuY2hyKDM5KS4nJiM4MjIwOycuJG5hbWUuJyYjODIyMTsnLmNocigzOSku
JywgJy5jaHIoMzkpLicmIzYwO2ltZyBzcmM9JiMzNDsnLmh1LiRpbWdfZGlyLicvJy4kaWQu
JGV4dC4nJiMzNDsgLyYjNjI7Jy5jaHIoMzkpLicsICcuJHcuJywgJy4kaC4nKTsgcmV0dXJu
IGZhbHNlOyI+Jy51cG1faW1nX3BvcHBlcl9nVHh0KCdpbWFnZScpLic8L2E+PC9saT4nOwoK
CQkJCWlmICghZW1wdHkoJGFsdCkpCgkJCQl7CgkJCQkJJHByZXZpZXcgLj0gbi50Lic8bGk+
PGEgaHJlZj0iIyIgb25jbGljaz0ibWFrZVdpbignLmNocigzOSkudXBtX2ltZ19wb3BwZXJf
Z1R4dCgnYWx0X3RleHRfZm9yJykuJyAmIzgyMjA7Jy4kbmFtZS4nJiM4MjIxOycuY2hyKDM5
KS4nLCAnLmNocigzOSkuaHRtbHNwZWNpYWxjaGFycygkYWx0KS5jaHIoMzkpLicpOyByZXR1
cm4gZmFsc2U7Ij4nLmdUeHQoJ2FsdF90ZXh0JykuJzwvYT48L2xpPic7CgkJCQl9CgoJCQkJ
aWYgKCFlbXB0eSgkY2FwdGlvbikpCgkJCQl7CgkJCQkJJHByZXZpZXcgLj0gbi50Lic8bGk+
PGEgaHJlZj0iIyIgb25jbGljaz0ibWFrZVdpbignLmNocigzOSkudXBtX2ltZ19wb3BwZXJf
Z1R4dCgnY2FwdGlvbl9mb3InKS4nICYjODIyMDsnLiRuYW1lLicmIzgyMjE7Jy5jaHIoMzkp
LicsICcuY2hyKDM5KS5odG1sc3BlY2lhbGNoYXJzKCRjYXB0aW9uKS5jaHIoMzkpLicpOyBy
ZXR1cm4gZmFsc2U7Ij4nLmdUeHQoJ2NhcHRpb24nKS4nPC9hPjwvbGk+JzsKCQkJCX0KCgkJ
CQkkcHJldmlldyAuPSBuLic8L3VsPic7CgoJCQkJJGNhdGVnb3J5ID0gKCRjYXRlZ29yeSkg
PyAnPHNwYW4gdGl0bGU9IicuZmV0Y2hfY2F0ZWdvcnlfdGl0bGUoJGNhdGVnb3J5LCAnaW1h
Z2UnKS4nIj4nLiRjYXRlZ29yeS4nPC9zcGFuPicgOiAnJzsKCgkJCQllY2hvIG4ubi50cigK
CQkJCQluLnRkKCRpZHMsIDEyNSkuCgoJCQkJCXRkKCc8YSBocmVmPSInLiRlZGl0X3VybC4n
IiBvbmNsaWNrPSJ3YXJuRWRpdEltYWdlKCcuJGlkLicpOyByZXR1cm4gZmFsc2U7Ij4nLiRu
YW1lLic8L2E+JwoJCQkJCSwgNzUpLgoKCQkJCQl0ZCgkdGh1bWJuYWlsLCAxOTUpLgoKCQkJ
CQl0ZCgkcHJldmlldykuCgoJCQkJCXRkKAoJCQkJCQknPHNwYW4gdGl0bGU9IicuZ2V0X2F1
dGhvcl9uYW1lKCRhdXRob3IpLiciPicuJGF1dGhvci4nPC9zcGFuPicKCQkJCQksIDc1KS4K
CgkJCQkJdGQoJGluc2VydCwgMTUwKS4KCQkJCQkoIGZ1bmN0aW9uX2V4aXN0cygndXBtX2lt
YWdlJykgPyBuLnRkKCRwbHVnaW4pIDogJycgKS4KCgkJCQkJdGQoCgkJCQkJCWRMaW5rKCdp
bWFnZScsICdpbWFnZV9kZWxldGUnLCAnaWQnLCAkaWQpCgkJCQkJLCAxMCkKCQkJCSk7CgkJ
CX0KCgkJCWVjaG8gZW5kVGFibGUoKS4KCgkJCQluYXZfZm9ybV91cG0oJ3VwbV9pbWdfcG9w
cGVyJywnMScsICRwYWdlLCAkbnVtUGFnZXMsICRzb3J0LCAkZGlyLCAkY3JpdCwgJHNlYXJj
aF9tZXRob2QpLgoKCQkJCXVwbV9pbWdfcG9wcGVyX3BhZ2VieV9mb3JtKCkuCgoJCQkJbi50
YWcoCgkJCQkJbi5ncmFmKHVwbV9pbWdfcG9wcGVyX2dUeHQoJ3JldHVybicpKS4KCQkJCQlu
LmdyYWYoJzxhIGlkPSJ5ZXMiIGhyZWY9IiMiIG9uY2xpY2s9ImdvQmFjayh0aGlzLmhyZWYp
OyByZXR1cm4gZmFsc2U7Ij4nLmdUeHQoJ3llcycpLic8L2E+LicuCgkJCQkJCScgPGEgaWQ9
Im5vIiBocmVmPSIjIiBvbmNsaWNrPSJkb25lKFwncmV0dXJuXCcpOyByZXR1cm4gZmFsc2U7
Ij4nLmdUeHQoJ25vJykuJzwvYT4uJykKCQkJCSwgJ2RpdicsCScgaWQ9InJldHVybiIgc3R5
bGU9ImRpc3BsYXk6IG5vbmU7IHdpZHRoOiAyMDBweDsgaGVpZ2h0OiA3NXB4OyInKS4KCgkJ
CQluLmdyYWYodXBtX2ltZ19wb3BwZXJfZ1R4dCgnc3VjY2VzcycpLCAnIGlkPSJzdWNjZXNz
IiBzdHlsZT0iZGlzcGxheTogbm9uZTsgd2lkdGg6IDE1MHB4OyBoZWlnaHQ6IDM1cHg7Iicp
LgoJCQkJbi5ncmFmKHVwbV9pbWdfcG9wcGVyX2dUeHQoJ2ZhaWxlZCcpLCAnIGlkPSJmYWls
ZWQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyB3aWR0aDogMTUwcHg7IGhlaWdodDogMzVweDsi
Jyk7CgkJfQoJfQoKLy8gLS0tCgoJZnVuY3Rpb24gdXBtX2ltZ19wb3BwZXJfb3B0aW9uc19m
b3JtKCkKCXsKCQlnbG9iYWwgJHByZWZzOwoKCQllY2hvIG4uJzxmb3JtIGFjdGlvbj0iIiBz
dHlsZT0ibWFyZ2luLWJvdHRvbTogMTVweDsnLiggISRwcmVmc1sndXBtX2ltZ19wb3BwZXJf
c2hvd19mb3JtJ10gPyAnIGRpc3BsYXk6IG5vbmU7JyA6ICcnKS4nIj4nLgoJCQlncmFmKAoJ
CQkJbi4nPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iaW5jX3dpZHRoIicuKCgkcHJlZnNb
J3VwbV9pbWdfcG9wcGVyX3Nob3dfd2lkdGgnXSA9PSAnMScpID8gJyBjaGVja2VkPSJjaGVj
a2VkIicgOiAnJykuJyAvPiA8bGFiZWwgZm9yPSJpbmNfd2lkdGgiPicudXBtX2ltZ19wb3Bw
ZXJfZ1R4dCgnaW5jbHVkZV93aWR0aCcpLic8L2xhYmVsPiAnLgoJCQkJbi4nPGlucHV0IHR5
cGU9ImNoZWNrYm94IiBpZD0iaW5jX2hlaWdodCInLigoJHByZWZzWyd1cG1faW1nX3BvcHBl
cl9zaG93X2hlaWdodCddID09ICcxJykgPyAnIGNoZWNrZWQ9ImNoZWNrZWQiJyA6ICcnKS4n
IC8+IDxsYWJlbCBmb3I9ImluY19oZWlnaHQiPicudXBtX2ltZ19wb3BwZXJfZ1R4dCgnaW5j
bHVkZV9oZWlnaHQnKS4nPC9sYWJlbD4gJy4KCQkJCW4uJzxpbnB1dCB0eXBlPSJjaGVja2Jv
eCIgaWQ9ImluY19hbHQiJy4oKCRwcmVmc1sndXBtX2ltZ19wb3BwZXJfc2hvd19hbHQnXSA9
PSAnMScpID8gJyBjaGVja2VkPSJjaGVja2VkIicgOiAnJykuJyAvPiA8bGFiZWwgZm9yPSJp
bmNfYWx0Ij4nLnVwbV9pbWdfcG9wcGVyX2dUeHQoJ2luY2x1ZGVfYWx0JykuJzwvbGFiZWw+
ICcuCgkJCQluLic8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJpbmNfdGl0bGUiJy4oKCRw
cmVmc1sndXBtX2ltZ19wb3BwZXJfc2hvd190aXRsZSddID09ICcxJykgPyAnIGNoZWNrZWQ9
ImNoZWNrZWQiJyA6ICcnKS4nIC8+IDxsYWJlbCBmb3I9ImluY190aXRsZSI+Jy51cG1faW1n
X3BvcHBlcl9nVHh0KCdpbmNsdWRlX2NhcHRpb24nKS4nPC9sYWJlbD4nLmJyLgoJCQkJbi4n
PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iaW5jX2NsYXNzIicuKCgkcHJlZnNbJ3VwbV9p
bWdfcG9wcGVyX3Nob3dfY2xhc3MnXSA9PSAnMScpID8gJyBjaGVja2VkPSJjaGVja2VkIicg
OiAnJykuJyAvPiA8bGFiZWwgZm9yPSJpbmNfY2xhc3MiPicudXBtX2ltZ19wb3BwZXJfZ1R4
dCgnYXNzaWduX2NsYXNzJykuJzwvbGFiZWw+ICcuCgkJCQluLic8aW5wdXQgdHlwZT0idGV4
dCIgaWQ9InRoZV9jbGFzcyIgdmFsdWU9IicuJHByZWZzWyd1cG1faW1nX3BvcHBlcl90aGVf
Y2xhc3MnXS4nIiBjbGFzcz0iZWRpdCIgLz4nCgkJCSwgJyBzdHlsZT0idGV4dC1hbGlnbjog
Y2VudGVyOyInKS4KCgkJCW4uZ3JhZigKCQkJCSc8bGFiZWwgZm9yPSJjdXN0b21fZm9ybSI+
Jy51cG1faW1nX3BvcHBlcl9nVHh0KCdjdXN0b21fZm9ybScpLic8L2xhYmVsPiA8aW5wdXQg
dHlwZT0idGV4dCIgaWQ9ImN1c3RvbV9mb3JtIiB2YWx1ZT0iJy4kcHJlZnNbJ3VwbV9pbWdf
cG9wcGVyX2N1c3RvbV9mb3JtJ10uJyIgY2xhc3M9ImVkaXQiIC8+ICgnLnVwbV9pbWdfcG9w
cGVyX2dUeHQoJ292ZXJyaWRlJykuJyknCgkJCSwgJyBzdHlsZT0idGV4dC1hbGlnbjogY2Vu
dGVyOyInKS4KCgkJbi4nPC9mb3JtPic7Cgl9CgovLyAtLS0KCglmdW5jdGlvbiB1cG1faW1n
X3BvcHBlcl9zZWFyY2hfZm9ybSgkY3JpdCwgJG1ldGhvZCwgJHNvcnQsICRkaXIpCgl7CgkJ
JGRlZmF1bHRfbWV0aG9kID0gJ25hbWUnOwoKCQkkbWV0aG9kID0gKCRtZXRob2QpID8gJG1l
dGhvZCA6ICRkZWZhdWx0X21ldGhvZDsKCgkJJG1ldGhvZHMgPQlhcnJheSgKCQkJJ2lkJwkJ
CSA9PiBnVHh0KCdJRCcpLAoJCQknbmFtZScJCSA9PiBnVHh0KCduYW1lJyksCgkJCSdjYXRl
Z29yeScgPT4gZ1R4dCgnaW1hZ2VfY2F0ZWdvcnknKSwKCQkJJ2F1dGhvcicJID0+IGdUeHQo
J2F1dGhvcicpLAoJCQknYWx0JwkJCSA9PiBnVHh0KCdhbHRfdGV4dCcpLAoJCQknY2FwdGlv
bicJID0+IGdUeHQoJ2NhcHRpb24nKQoJCSk7CgoJCXJldHVybiBuLm4uJzxmb3JtIG1ldGhv
ZD0iZ2V0IiBhY3Rpb249ImluZGV4LnBocCIgc3R5bGU9Im1hcmdpbjogYXV0bzsgdGV4dC1h
bGlnbjogY2VudGVyOyI+Jy4KCQkJbi5ncmFmKAoJCQkJJzxsYWJlbCBmb3I9InVwbS1pbWct
cG9wcGVyLXNlYXJjaCI+Jy5nVHh0KCdzZWFyY2gnKS4nPC9sYWJlbD4nLnNwLgoJCQkJc2Vs
ZWN0SW5wdXQoJ3NlYXJjaF9tZXRob2QnLCAkbWV0aG9kcywgJG1ldGhvZCwgJycsICcnLCAn
dXBtLWltZy1wb3BwZXItc2VhcmNoJykuc3AuCgkJCQlmSW5wdXQoJ3RleHQnLCAnY3JpdCcs
ICRjcml0LCAnZWRpdCcsICcnLCAnJywgJzE1JykuCgkJCQllSW5wdXQoJ3VwbV9pbWdfcG9w
cGVyJykuCgkJCQloSW5wdXQoJ2JtJywnMScpLgoJCQkJZklucHV0KCdzdWJtaXQnLCAnc2Vh
cmNoJywgZ1R4dCgnZ28nKSwgJ3NtYWxsZXJib3gnKQoJCQkpLgoKCQkJKCRjcml0ID8gbi5n
cmFmKCc8YSBocmVmPSI/ZXZlbnQ9dXBtX2ltZ19wb3BwZXInLmEuJ2JtPXRydWUiPicudXBt
X2ltZ19wb3BwZXJfZ1R4dCgndmlld19hbGwnKS4nPC9hPicpIDogJycpLgoKCQluLic8L2Zv
cm0+JzsKCX0KCi8vIC0tLQoKCWZ1bmN0aW9uIHVwbV9pbWdfcG9wcGVyX2xpbmsoKQoJewoJ
CSRhcHBfbW9kZSA9IGdwcygnYXBwX21vZGUnKTsKCQlpZiAoJGFwcF9tb2RlPT09J2FzeW5j
JykgcmV0dXJuOwoKCQkkdmlldyA9IGdwcygndmlldycpOwoKCQlpZiAoJHZpZXcgPT0gJ3Rl
eHQnIG9yIGVtcHR5KCR2aWV3KSkKCQl7CgkJCWVjaG8gPDw8Zm9ybQo8Zm9ybSBhY3Rpb249
IiI+CjxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJ1cG1faW1nX3BvcHBlcl9zdGFydCIgdmFs
dWU9IiI+CjwvZm9ybT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iaW5k
ZXgucGhwP2V2ZW50PXVwbV9pbWdfcG9wcGVyX2pzJiMzODtuYW1lPWxpbmsiPjwvc2NyaXB0
Pgpmb3JtOwoKCQl9Cgl9CgovLyAtLS0KCglmdW5jdGlvbiB1cG1faW1nX3BvcHBlcl9wYWdl
YnlfZm9ybSgpCgl7CgkJZ2xvYmFsICRwcmVmczsKCgkJJHZhbHMgPSBhcnJheSgKCQkJMTUJ
PT4gMTUsCgkJCTI1CT0+IDI1LAoJCQk1MAk9PiA1MCwKCQkJMTAwID0+IDEwMAoJCSk7CgoJ
CSRzZWxlY3RfcGFnZSA9IHNlbGVjdElucHV0KCdxdHknLCAkdmFscywgJHByZWZzWydpbWFn
ZV9saXN0X3BhZ2VieSddLCAnJywgMSk7CgoJCS8vIHByb3BlciBsb2NhbGlzYXRpb24KCQkk
cGFnZSA9IHN0cl9yZXBsYWNlKCd7cGFnZX0nLCAkc2VsZWN0X3BhZ2UsIGdUeHQoJ3ZpZXdf
cGVyX3BhZ2UnKSk7CgoJCXJldHVybiBmb3JtKAoJCQknPGRpdiBzdHlsZT0ibWFyZ2luOiBh
dXRvOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4nLgoJCQkJJHBhZ2UuCgkJCQllSW5wdXQoJ3Vw
bV9pbWdfcG9wcGVyJykuCgkJCQlzSW5wdXQoJ3VwbV9pbWdfcG9wcGVyX2NoYW5nZV9wYWdl
YnknKS4KCQkJCWhJbnB1dCgnYm0nLCAnMScpLgoJCQkJJzxub3NjcmlwdD4gPGlucHV0IHR5
cGU9InN1Ym1pdCIgdmFsdWU9IicuZ1R4dCgnZ28nKS4nIiBjbGFzcz0ic21hbGxlcmJveCIg
Lz48L25vc2NyaXB0PicuCgkJCSc8L2Rpdj4nCgkJKTsKCX0KCi8vIC0tLQoKCWZ1bmN0aW9u
IHVwbV9pbWdfcG9wcGVyX2pzKCkKCXsKCQl3aGlsZSAoQG9iX2VuZF9jbGVhbigpKTsKCgkJ
aWYgKGdwcygnbmFtZScpID09ICdsaW5rJykKCQl7CgkJCWdsb2JhbCAkcHJlZnM7CgoJCQkk
dHh0ID0gZ1R4dCgnZGF0ZV9zZXR0aW5ncycpOwoJCQkkbGFuZ19pbnNlcnRfaW1hZ2UgPSB1
cG1faW1nX3BvcHBlcl9nVHh0KCdpbnNlcnRfaW1hZ2UnKTsKCgkJCWhlYWRlcigiQ29udGVu
dC10eXBlOiB0ZXh0L2phdmFzY3JpcHQiKTsKCgkJCWVjaG8gPDw8anMKCmRvY3VtZW50Lmdl
dEVsZW1lbnRCeUlkKCd1cG1faW1nX3BvcHBlcl9zdGFydCcpLnZhbHVlID0gZG9jdW1lbnQu
Z2V0RWxlbWVudEJ5SWQoJ2JvZHknKS52YWx1ZTsKCnZhciBjdXJyZW50ID0gJ2JvZHknOwoK
aWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGNlcnB0JykpCnsKCS8vIElFIGlzIHJl
dGFyZGVkCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9keScpLm9uY2xpY2sgPSBmdW5j
dGlvbiAoKSB7CgkJY3VycmVudCA9ICdib2R5JzsKCX07CgoJZG9jdW1lbnQuZ2V0RWxlbWVu
dEJ5SWQoJ2V4Y2VycHQnKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCWN1cnJlbnQgPSAn
ZXhjZXJwdCc7Cgl9Owp9CgovLyAtLS0KCnZhciB0eHQgPSAnJHR4dCc7Cgp2YXIgYSA9IChk
b2N1bWVudC5jcmVhdGVFbGVtZW50TlMpID8KCWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygn
aHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCcsICdhJykgOgoJZG9jdW1lbnQuY3JlYXRl
RWxlbWVudCgnYScpOwoKYS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgn
JGxhbmdfaW5zZXJ0X2ltYWdlJykpOwoKdmFyIHcgPSB7JHByZWZzWyd1cG1faW1nX3BvcHBl
cl9hZG1pbl9wb3B1cF93aWR0aCddfTsKdmFyIGggPSB7JHByZWZzWyd1cG1faW1nX3BvcHBl
cl9hZG1pbl9wb3B1cF9oZWlnaHQnXX07Cgp2YXIgdCA9IChzY3JlZW4uaGVpZ2h0KSA/IChz
Y3JlZW4uaGVpZ2h0IC0gaCkgLyAyIDogMDsKdmFyIGwgPSAoc2NyZWVuLndpZHRoKSA/IChz
Y3JlZW4ud2lkdGggLSB3KSAvIDIgOiAwOwoKYS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJ
dmFyIHVwbV9pbWdfcG9wcGVyID0gd2luZG93Lm9wZW4odGhpcy5ocmVmLCAndXBtX2ltZ19w
b3BwZXInLCAndG9wID0gJyt0KycsIGxlZnQgPSAnK2wrJywgd2lkdGggPSAnK3crJywgaGVp
Z2h0ID0gJytoKycsIHRvb2xiYXIgPSBubywgbG9jYXRpb24gPSBubywgZGlyZWN0b3JpZXMg
PSBubywgc3RhdHVzID0geWVzLCBtZW51YmFyID0gbm8sIHNjcm9sbGJhcnMgPSB5ZXMsIGNv
cHloaXN0b3J5ID0gbm8sIHJlc2l6YWJsZSA9IHllcycpOwoJCXVwbV9pbWdfcG9wcGVyLmZv
Y3VzKCk7CgkJcmV0dXJuIGZhbHNlOwp9OwoKYS5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsICdi
bGFuaycpOwphLnNldEF0dHJpYnV0ZSgnaHJlZicsICc/ZXZlbnQ9dXBtX2ltZ19wb3BwZXJc
dTAwMjZibT0xJyk7Cgp2YXIgbGluayA9IChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMpID8K
CWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRt
bCcsICdoNScpIDoKCWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2g1Jyk7CgpsaW5rLmFwcGVu
ZENoaWxkKGEpOwoKCi8vIC0tLQoKCnZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Io
JyN0eHAtaW1hZ2UtZ3JvdXAgI3R4cC1pbWFnZS1ncm91cC1jb250ZW50IC5hcnRpY2xlLWlt
YWdlJyk7CmVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGxpbmssIGVsKTsKCi8vIC0tLQov
LyB0aGFua3MgQWxleCEgPGh0dHA6Ly93d3cuYWxleGtpbmcub3JnLz4KCmZ1bmN0aW9uIHVw
bV9pbWdfcG9wcGVyX2luc2VydChteUZpZWxkLCBteVZhbHVlKQp7CgkvLyBJRSBzdXBwb3J0
CglpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKQoJewoJCW15RmllbGQuZm9jdXMoKTsKCQlzZWwg
PSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTsKCQlzZWwudGV4dCA9IG15VmFs
dWU7CgkJbXlGaWVsZC5mb2N1cygpOwoJfQoKCS8vIE1vemlsbGEvTmV0c2NhcGUgc3VwcG9y
dAoJZWxzZSBpZiAobXlGaWVsZC5zZWxlY3Rpb25TdGFydCB8fCBteUZpZWxkLnNlbGVjdGlv
blN0YXJ0ID09ICcwJykKCXsKCQlzdGFydFBvcyA9IG15RmllbGQuc2VsZWN0aW9uU3RhcnQ7
CgkJZW5kUG9zID0gbXlGaWVsZC5zZWxlY3Rpb25FbmQ7CgoJCW15RmllbGQudmFsdWUgPSBt
eUZpZWxkLnZhbHVlLnN1YnN0cmluZygwLCBzdGFydFBvcykgKyBteVZhbHVlICsgbXlGaWVs
ZC52YWx1ZS5zdWJzdHJpbmcoZW5kUG9zLCBteUZpZWxkLnZhbHVlLmxlbmd0aCk7CgoJCW15
RmllbGQuZm9jdXMoKTsKCQlteUZpZWxkLnNlbGVjdGlvblN0YXJ0ID0gc3RhcnRQb3MgKyBt
eVZhbHVlLmxlbmd0aDsKCQlteUZpZWxkLnNlbGVjdGlvbkVuZCA9IHN0YXJ0UG9zICsgbXlW
YWx1ZS5sZW5ndGg7Cgl9CgoJZWxzZQoJewoJCW15RmllbGQudmFsdWUgKz0gbXlWYWx1ZTsK
CQlteUZpZWxkLmZvY3VzKCk7Cgl9Cn0KanM7CgkJfQoKCQllbHNlaWYgKGdwcygnbmFtZScp
ID09ICdwb3AnKQoJCXsKCQkJZ2xvYmFsICRpbWdfZGlyOwoKCQkJJGltZ191cmwgPSBodS4k
aW1nX2RpcjsKCgkJCSRsYW5nX2NvbmZpcm1fb3ZlcndyaXRlID0gdXBtX2ltZ19wb3BwZXJf
Z1R4dCgnY29uZmlybV9vdmVyd3JpdGUnKTsKCQkJJGxhbmdfY2hlY2tfbGVhdmUgPSB1cG1f
aW1nX3BvcHBlcl9nVHh0KCdjaGVja19sZWF2ZScpOwoKCQkJaGVhZGVyKCJDb250ZW50LXR5
cGU6IHRleHQvamF2YXNjcmlwdCIpOwoKCQkJZWNobyA8PDxqcwpmdW5jdGlvbiBtYWtlV2lu
KHRpdGxlLCBjb250ZW50LCB3LCBoKQp7CglpZiAodyAmJiBoKQoJewoJCXZhciB3dyA9IHBh
cnNlSW50KHcpOwoJCXZhciB3aCA9IHBhcnNlSW50KGgpOwoKCQlpZiAod3cgPCAxMDApCgkJ
ewoJCQl3dyA9IDEyNTsKCQl9CgoJCWlmICh3aCA8IDEwMCkKCQl7CgkJCXdoID0gMTI1OwoK
CQkJd3cgKz0gNzU7CgkJfQoKCQl2YXIgc2Nyb2xsID0gZmFsc2U7CgoJCWlmIChzY3JlZW4u
d2lkdGggJiYgKHNjcmVlbi53aWR0aCA8IHd3KSkKCQl7CgkJCXNjcm9sbCA9ICd5ZXMnOwoJ
CQl3dyA9IHNjcmVlbi53aWR0aDsKCQl9CgoJCWlmIChzY3JlZW4uaGVpZ2h0ICYmIChzY3Jl
ZW4uaGVpZ2h0IDwgd2gpKQoJCXsKCQkJc2Nyb2xsID0gJ3llcyc7CgkJCXdoID0gc2NyZWVu
LmhlaWdodDsKCQl9Cgl9CgoJZWxzZQoJewoJCXd3ID0gNDUwOwoJCXdoID0gMjUwOwoJfQoK
CWlmICghdGl0bGUpCgl7CgkJdGl0bGUgPSBuYW1lOwoJfQoKCXZhciB0ID0gKHNjcmVlbi5o
ZWlnaHQpID8gKHNjcmVlbi5oZWlnaHQgLSB3aCkgLyAyIDogMDsKCXZhciBsID0gKHNjcmVl
bi53aWR0aCkgPyAoc2NyZWVuLndpZHRoIC0gd3cpIC8gMiA6IDA7CgoJdmFyIGZhc3RXaW4g
PSB3aW5kb3cub3BlbignJywgJ3VwbV9pbWdfcG9wcGVyX3ByZXZpZXcnLCAndG9wID0gJyt0
KycsIGxlZnQgPSAnK2wrJywgd2lkdGggPSAnK3d3KycsIGhlaWdodCA9ICcrd2grJywgdG9v
bGJhciA9IG5vLCBsb2NhdGlvbiA9IG5vLCBkaXJlY3RvcmllcyA9IG5vLCBzdGF0dXMgPSBu
bywgbWVudWJhciA9IG5vLCBzY3JvbGxiYXJzID0gJytzY3JvbGwrJywgY29weWhpc3Rvcnkg
PSBubywgcmVzaXphYmxlID0geWVzJyk7CgoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCc8
IURPQ1RZUEUgSFRNTCBQVUJMSUMgIi0vL1czQy8vRFREIEhUTUwgNC4wMS8vRU4iICJodHRw
Oi8vd3d3LnczLm9yZy9UUi9odG1sNC9zdHJpY3QuZHRkIj4nKTsKCWZhc3RXaW4uZG9jdW1l
bnQud3JpdGVsbignPGh0bWw+Jyk7CglmYXN0V2luLmRvY3VtZW50LndyaXRlbG4oJzxoZWFk
PicpOwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCc8bWV0YSBodHRwLWVxdWl2PSJDb250
ZW50LVR5cGUiIGNvbnRlbnQ9InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCI+Jyk7CglmYXN0
V2luLmRvY3VtZW50LndyaXRlbG4oJzxtZXRhIGh0dHAtZXF1aXY9ImltYWdldG9vbGJhciIg
Y29udGVudD0ibm8iPicpOwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCc8dGl0bGU+Jyt0
aXRsZSsnPC90aXRsZT4nKTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignPHN0eWxlIHR5
cGU9InRleHQvY3NzIj4nKTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignPCEtLScpOwoJ
ZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCdib2R5IHsnKTsKCWZhc3RXaW4uZG9jdW1lbnQu
d3JpdGVsbignbWFyZ2luOiAwOycpOwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCdwYWRk
aW5nOiAwOycpOwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCdjb2xvcjogIzAwMDsnKTsK
CWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsnKTsK
CWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignYm9yZGVyLXRvcDogMTVweCBzb2xpZCAjZmMz
OycpOwoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCd0ZXh0LWFsaWduOiBjZW50ZXI7Jyk7
CgoJaWYgKHNjcm9sbCA9PSBmYWxzZSkKCXsKCQlmYXN0V2luLmRvY3VtZW50LndyaXRlbG4o
J292ZXJmbG93OiBoaWRkZW47Jyk7Cgl9CgoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCd9
Jyk7CgoJZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCcnKTsKCWZhc3RXaW4uZG9jdW1lbnQu
d3JpdGVsbignaW1nIHsnKTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignbWFyZ2luOiAw
IGF1dG87Jyk7CglmYXN0V2luLmRvY3VtZW50LndyaXRlbG4oJ3BhZGRpbmc6IDA7Jyk7Cglm
YXN0V2luLmRvY3VtZW50LndyaXRlbG4oJ2JvcmRlcjogbm9uZTsnKTsKCglpZiAod2ggPT0g
MTI1KQoJewoJCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignbWFyZ2luLXRvcDogJyArIE1h
dGguZmxvb3IoNTAtKGgvMikpICsgJ3B4OycpOwoJfQoKCWZhc3RXaW4uZG9jdW1lbnQud3Jp
dGVsbignfScpOwoKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignLS0+Jyk7CglmYXN0V2lu
LmRvY3VtZW50LndyaXRlbG4oJzwvc3R5bGU+Jyk7CglmYXN0V2luLmRvY3VtZW50LndyaXRl
bG4oJzwvaGVhZD4nKTsKCWZhc3RXaW4uZG9jdW1lbnQud3JpdGVsbignPGJvZHk+Jyk7Cglm
YXN0V2luLmRvY3VtZW50LndyaXRlbG4oJzxkaXY+Jyk7CglmYXN0V2luLmRvY3VtZW50Lndy
aXRlbG4oY29udGVudCk7CglmYXN0V2luLmRvY3VtZW50LndyaXRlbG4oJzwvZGl2PicpOwoJ
ZmFzdFdpbi5kb2N1bWVudC53cml0ZWxuKCc8L2JvZHk+Jyk7CglmYXN0V2luLmRvY3VtZW50
LndyaXRlKCc8L2h0bWw+Jyk7CgoJZmFzdFdpbi5kb2N1bWVudC5jbG9zZSgpOwoKCWZhc3RX
aW4uZm9jdXMoKTsKCglyZXR1cm4gZmFsc2U7Cn0KCi8vIC0tLQoKZnVuY3Rpb24gYnVpbGRU
YWcodHlwZSwgaWQsIGV4dCwgd2lkdGgsIGhlaWdodCwgYWx0LCB0aXRsZSkKewoJdmFyIGlu
Y19hbHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5jX2FsdCcpOwoJdmFyIGluY190
aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmNfdGl0bGUnKTsKCgl2YXIgaW5j
X3dpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luY193aWR0aCcpOwoJdmFyIGlu
Y19oZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5jX2hlaWdodCcpOwoKCXZh
ciBpbmNfY2xhc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5jX2NsYXNzJyk7Cgl2
YXIgdGhlX2NsYXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoZV9jbGFzcycpLnZh
bHVlOwoKCXZhciBjdXN0b21fZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0
b21fZm9ybScpLnZhbHVlOwoKCWlmICh0eXBlID09ICdpbWFnZScpCgl7CgkJdmFyIGluc2Vy
dCA9ICc8dHhwOmltYWdlIGlkPSInK2lkKyciJzsKCgkJaWYgKGluY19jbGFzcy5jaGVja2Vk
ICYmIHRoZV9jbGFzcykKCQl7CgkJCWluc2VydCArPSAnIGNsYXNzPSInK3RoZV9jbGFzcysn
Iic7CgkJfQoJfQoKCWVsc2UgaWYgKHR5cGUgPT0gJ3RodW1iJykKCXsKCQl2YXIgaW5zZXJ0
ID0gJzx0eHA6dGh1bWJuYWlsIGlkPSInK2lkKyciJzsKCX0KCgllbHNlIGlmICh0eXBlID09
ICdwb3B1cCcpCgl7CgkJdmFyIGluc2VydCA9ICc8dHhwOnRodW1ibmFpbCBpZD0iJytpZCsn
IiBwb3BsaW5rPSIxIic7Cgl9CgoJZWxzZSBpZiAodHlwZSA9PSAndGV4dGlsZScpCgl7CgkJ
dmFyIGluc2VydCA9ICchJzsKCgkJaWYgKGluY19jbGFzcy5jaGVja2VkICYmIHRoZV9jbGFz
cykKCQl7CgkJCWluc2VydCArPSAnKCcrdGhlX2NsYXNzKycpJzsKCQl9CgoJCWluc2VydCAr
PSAnJGltZ191cmwvJytpZCtleHQ7CgoJCWlmIChpbmNfYWx0LmNoZWNrZWQgJiYgYWx0KQoJ
CXsKCQkJaW5zZXJ0ICs9ICcoJythbHQrJyknOwoJCX0KCgkJaW5zZXJ0ICs9ICchJzsKCgkJ
cmV0dXJuIGluc2VydDsKCX0KCgllbHNlIGlmICh0eXBlID09ICd4aHRtbCcpCgl7CgkJdmFy
IGluc2VydCA9ICc8aW1nIHNyYz0iJGltZ191cmwvJytpZCtleHQrJyInOwoKCQlpZiAoaW5j
X2NsYXNzLmNoZWNrZWQgJiYgdGhlX2NsYXNzKQoJCXsKCQkJaW5zZXJ0ICs9ICcgY2xhc3M9
IicrdGhlX2NsYXNzKyciJzsKCQl9CgoJCWlmIChpbmNfd2lkdGguY2hlY2tlZCAmJiB3aWR0
aCkKCQl7CgkJCWluc2VydCArPSAnIHdpZHRoPSInK3dpZHRoKyciJzsKCQl9CgoJCWlmIChp
bmNfaGVpZ2h0LmNoZWNrZWQgJiYgaGVpZ2h0KQoJCXsKCQkJaW5zZXJ0ICs9ICcgaGVpZ2h0
PSInK2hlaWdodCsnIic7CgkJfQoKCQlpZiAoaW5jX2FsdC5jaGVja2VkICYmIGFsdCkKCQl7
CgkJCWluc2VydCArPSAnIGFsdD0iJythbHQrJyInOwoJCX0KCgkJZWxzZQoJCXsKCQkJaW5z
ZXJ0ICs9ICcgYWx0PSIiJzsKCQl9CgoJCWlmIChpbmNfdGl0bGUuY2hlY2tlZCAmJiB0aXRs
ZSkKCQl7CgkJCWluc2VydCArPSAnIHRpdGxlPSInK3RpdGxlKyciJzsKCQl9Cgl9CgoJZWxz
ZSBpZiAodHlwZSA9PSAncGx1Z2luLWN1c3RvbScpCgl7CgkJdmFyIGluc2VydCA9ICc8dHhw
OnVwbV9pbWFnZSBpbWFnZV9pZD0iJytpZCsnIiBmb3JtPSInK2N1c3RvbV9mb3JtKyciJzsK
CX0KCgllbHNlCgl7CgkJdHlwZSA9IG5ldyBTdHJpbmcodHlwZSk7CgkJdHlwZSA9IHR5cGUu
cmVwbGFjZSgncGx1Z2luLScsICcnKTsKCgkJdmFyIGluc2VydCA9ICc8dHhwOnVwbV9pbWFn
ZSB0eXBlPSInK3R5cGUrJyIgaW1hZ2VfaWQ9IicraWQrJyInOwoKCQlpZiAoaW5jX2NsYXNz
LmNoZWNrZWQgJiYgdGhlX2NsYXNzKQoJCXsKCQkJaW5zZXJ0ICs9ICcgY2xhc3M9IicrdGhl
X2NsYXNzKyciJzsKCQl9CgoJCWlmIChpbmNfd2lkdGguY2hlY2tlZCA9PSBmYWxzZSkKCQl7
CgkJCWluc2VydCArPSAnIHNob3dfd2lkdGg9Im5vIic7CgkJfQoKCQlpZiAoaW5jX2hlaWdo
dC5jaGVja2VkID09IGZhbHNlKQoJCXsKCQkJaW5zZXJ0ICs9ICcgc2hvd19oZWlnaHQ9Im5v
Iic7CgkJfQoKCQlpZiAoaW5jX2FsdC5jaGVja2VkID09IGZhbHNlKQoJCXsKCQkJaW5zZXJ0
ICs9ICcgc2hvd19hbHQ9Im5vIic7CgkJfQoKCQlpZiAoaW5jX3RpdGxlLmNoZWNrZWQgPT0g
ZmFsc2UpCgkJewoJCQlpbnNlcnQgKz0gJyBzaG93X3RpdGxlPSJubyInOwoJCX0KCX0KCglp
bnNlcnQgKz0gJyAvPic7CgoJcmV0dXJuIGluc2VydDsKfQoKLy8gLS0tCgpmdW5jdGlvbiBp
bnNlcnRUYWcodHlwZSwgaWQsIGV4dCwgd2lkdGgsIGhlaWdodCwgYWx0LCB0aXRsZSkKewoJ
dmFyIGluc2VydCA9IGJ1aWxkVGFnKHR5cGUsIGlkLCBleHQsIHdpZHRoLCBoZWlnaHQsIGFs
dCwgdGl0bGUpOwoKCWlmICh3aW5kb3cub3BlbmVyLmRvY3VtZW50LmFydGljbGVfZm9ybSkK
CXsKCQlpZiAodHlwZSA9PSAnYXBwZW5kLWFydGljbGUtaW1hZ2UnKQoJCXsKCQkJaWYgKHdp
bmRvdy5vcGVuZXIuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUtaW1hZ2UnKS52
YWx1ZSA9PSAnJykKCQkJewoJCQkJd2luZG93Lm9wZW5lci5kb2N1bWVudC5nZXRFbGVtZW50
QnlJZCgnYXJ0aWNsZS1pbWFnZScpLnZhbHVlID0gaWQ7CgkJCQlyZXR1cm4gc2hvd01zZygn
c3VjY2VzcycpOwoJCQl9CgoJCQllbHNlCgkJCXsKCQkJCXdpbmRvdy5vcGVuZXIuZG9jdW1l
bnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUtaW1hZ2UnKS52YWx1ZSArPSAnLCcraWQ7CgkJ
CQlyZXR1cm4gc2hvd01zZygnc3VjY2VzcycpOwoJCQl9CgkJfQoKCQllbHNlIGlmICh0eXBl
ID09ICdyZXBsYWNlLWFydGljbGUtaW1hZ2UnKQoJCXsKCQkJaWYgKHdpbmRvdy5vcGVuZXIu
ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUtaW1hZ2UnKS52YWx1ZS5sZW5ndGgg
PiAxKQoJCQl7CgkJCQl2YXIgb3B0aW9uID0gY29uZmlybSgnJGxhbmdfY29uZmlybV9vdmVy
d3JpdGUnKTsKCgkJCQlpZiAob3B0aW9uKQoJCQkJewoJCQkJCXdpbmRvdy5vcGVuZXIuZG9j
dW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUtaW1hZ2UnKS52YWx1ZSA9IGlkOwoJCQkJ
CXJldHVybiBzaG93TXNnKCdzdWNjZXNzJyk7CgkJCQl9CgkJCX0KCgkJCWVsc2UKCQkJewoJ
CQkJd2luZG93Lm9wZW5lci5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJ0aWNsZS1pbWFn
ZScpLnZhbHVlID0gaWQ7CgkJCQlyZXR1cm4gc2hvd01zZygnc3VjY2VzcycpOwoJCQl9CgkJ
fQoKCQllbHNlCgkJewoJCQl2YXIgdGVtcCA9ICd3aW5kb3cub3BlbmVyLmRvY3VtZW50Lmdl
dEVsZW1lbnRCeUlkKHdpbmRvdy5vcGVuZXIuY3VycmVudCknOwoKCQkJdGVtcCA9IGV2YWwo
dGVtcCk7CgoJCQl3aW5kb3cub3BlbmVyLnVwbV9pbWdfcG9wcGVyX2luc2VydCh0ZW1wLCBp
bnNlcnQpOwoKCQkJcmV0dXJuIHNob3dNc2coJ3N1Y2Nlc3MnKTsKCQl9Cgl9CgoJZWxzZSBp
ZiAod2luZG93Lm9wZW5lci5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybScpKQoJewoJ
CXdpbmRvdy5vcGVuZXIudXBtX2ltZ19wb3BwZXJfaW5zZXJ0KHdpbmRvdy5vcGVuZXIuZG9j
dW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0nKSwgaW5zZXJ0KTsKCQlyZXR1cm4gc2hvd01z
Zygnc3VjY2VzcycpOwoJfQoKCWVsc2UgaWYgKHdpbmRvdy5vcGVuZXIuZG9jdW1lbnQuZ2V0
RWxlbWVudEJ5SWQoJ2h0bWwnKSkKCXsKCQl3aW5kb3cub3BlbmVyLnVwbV9pbWdfcG9wcGVy
X2luc2VydCh3aW5kb3cub3BlbmVyLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdodG1sJyks
IGluc2VydCk7CgkJcmV0dXJuIHNob3dNc2coJ3N1Y2Nlc3MnKTsKCX0KCglyZXR1cm4gc2hv
d01zZygnZmFpbGVkJyk7Cn0KCi8vIC0tLQoKZnVuY3Rpb24gd2FybkVkaXRJbWFnZShpZCkK
ewoJaWYgKHdpbmRvdy5vcGVuZXIuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZHknKS52
YWx1ZSAhPSB3aW5kb3cub3BlbmVyLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cG1faW1n
X3BvcHBlcl9zdGFydCcpLnZhbHVlKQoJewoJCXZhciBjaGVjayA9IGNvbmZpcm0oJyRsYW5n
X2NoZWNrX2xlYXZlJyk7CgoJCWlmIChjaGVjaykKCQl7CgkJCWdvRWRpdEltYWdlKGlkKTsK
CQl9Cgl9CgoJZWxzZQoJewoJCWdvRWRpdEltYWdlKGlkKTsKCX0KCglyZXR1cm4gZmFsc2U7
Cn0KCi8vIC0tLQoKZnVuY3Rpb24gZ29FZGl0SW1hZ2UoaWQpCnsKCXdpbmRvdy5vcGVuZXIu
Zm9jdXMoKTsKCglpZiAod2luZG93Lm9wZW5lci5kb2N1bWVudC5hcnRpY2xlLnN0ZXAudmFs
dWUgIT0gJ2NyZWF0ZScpCgl7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3llcycpLnNl
dEF0dHJpYnV0ZSgnaHJlZicsIHdpbmRvdy5vcGVuZXIuZG9jdW1lbnQubG9jYXRpb24pOwoJ
CXNob3dNc2coJ3JldHVybicpOwoJfQoKCXdpbmRvdy5vcGVuZXIuZG9jdW1lbnQubG9jYXRp
b24gPSAnP2V2ZW50PWltYWdlXHUwMDI2c3RlcD1pbWFnZV9lZGl0XHUwMDI2aWQ9JytpZDsK
fQoKLy8gLS0tCgpmdW5jdGlvbiBnb0JhY2sodXJsKQp7Cgl3aW5kb3cub3BlbmVyLmZvY3Vz
KCk7CgoJZG9uZSgncmV0dXJuJyk7CgoJd2luZG93Lm9wZW5lci5kb2N1bWVudC5sb2NhdGlv
biA9IHVybDsKfQoKLy8gLS0tCgpmdW5jdGlvbiBzaG93TXNnKGlkKQp7Cgl2YXIgb2JqID0g
ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwoKCXZhciB3aWR0aCA9IHBhcnNlSW50KG9i
ai5zdHlsZS53aWR0aCk7Cgl2YXIgaGVpZ2h0ID0gcGFyc2VJbnQob2JqLnN0eWxlLmhlaWdo
dCk7CgoJdmFyIHRvcCA9IDEwMCArIHNjcm9sbFRvcCgpOwoJdmFyIGxlZnQgPSAoIChwYWdl
V2lkdGgoKSAvIDIpIC0gKHdpZHRoIC8gMikgKSArIHNjcm9sbExlZnQoKTsKCglvYmouc3R5
bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOwoJb2JqLnN0eWxlLnRvcCA9IHRvcCArICdweCc7
CglvYmouc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnOwoJb2JqLnN0eWxlLmRpc3BsYXkgPSAn
YmxvY2snOwoKCWlmIChpZCAhPSAncmV0dXJuJykKCXsKCQlzZXRUaW1lb3V0KCJkb25lKCci
K2lkKyInKSIsIDEwMDApOwoJfQp9CgovLyAtLS0KCmZ1bmN0aW9uIGRvbmUoaWQpCnsKCWRv
Y3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwp9Cgov
LyAtLS0KCmZ1bmN0aW9uIHBhZ2VXaWR0aCgpCnsKCWlmIChzZWxmLmlubmVyV2lkdGgpCgl7
CgkJcmV0dXJuIHNlbGYuaW5uZXJXaWR0aDsKCX0KCgllbHNlIGlmIChkb2N1bWVudC5kb2N1
bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKQoJ
ewoJCXJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7Cgl9CgoJ
cmV0dXJuIDA7Cn0KCi8vIC0tLQoKZnVuY3Rpb24gc2Nyb2xsVG9wKCkKewoJaWYgKHNlbGYu
cGFnZVlPZmZzZXQpCgl7CgkJcmV0dXJuIHNlbGYucGFnZVlPZmZzZXQ7Cgl9CgoJZWxzZSBp
ZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVu
dC5zY3JvbGxUb3ApCgl7CgkJcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3Jv
bGxUb3A7Cgl9CgoJcmV0dXJuIDA7Cn0KCi8vIC0tLQoKZnVuY3Rpb24gc2Nyb2xsTGVmdCgp
CnsKCWlmIChzZWxmLnBhZ2VZT2Zmc2V0KQoJewoJCXJldHVybiBzZWxmLnBhZ2VYT2Zmc2V0
OwoJfQoKCWVsc2UgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5k
b2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKQoJewoJCXJldHVybiBkb2N1bWVudC5kb2N1bWVu
dEVsZW1lbnQuc2Nyb2xsTGVmdDsKCX0KCglyZXR1cm4gMDsKfQoKanM7CgkJfQoKCQlleGl0
KDApOwoJfQoKLy8gLS0tCgoJZnVuY3Rpb24gdXBtX2ltZ19wb3BwZXJfcHJlZnMoJGV2ZW50
LCAkc3RlcCkKCXsKCQlnbG9iYWwgJHByZWZzOwoKCQlwYWdldG9wKHVwbV9pbWdfcG9wcGVy
X2dUeHQoJ3ByZWZzJyksICgkc3RlcCA9PSAndXBkYXRlJyA/IGdUeHQoJ3ByZWZlcmVuY2Vz
X3NhdmVkJykgOiAnJykpOwoKCQlpZiAoJHN0ZXAgPT0gJ3VwZGF0ZScpCgkJewoJCQlleHRy
YWN0KGRvU2xhc2gocHNhcyhhcnJheSgKCQkJCSdzaG93X3dpZHRoJywgJ3Nob3dfaGVpZ2h0
JywgJ3Nob3dfYWx0JywgJ3Nob3dfdGl0bGUnLCAnc2hvd19jbGFzcycsICd0aGVfY2xhc3Mn
LCAnY3VzdG9tX2Zvcm0nLAoJCQkJJ3Nob3dfZm9ybScsICdhZG1pbl9wb3B1cF93aWR0aCcs
ICdhZG1pbl9wb3B1cF9oZWlnaHQnCgkJCSkpKSk7CgoJCQkkc2hvd193aWR0aCAgPSAoJHNo
b3dfd2lkdGggPT0gJzEnKSA/ICRzaG93X3dpZHRoIDogJzAnOwoJCQkkc2hvd19oZWlnaHQg
PSAoJHNob3dfaGVpZ2h0ID09ICcxJykgPyAkc2hvd19oZWlnaHQgOiAnMCc7CgkJCSRzaG93
X2FsdCAgICA9ICgkc2hvd19hbHQgPT0gJzEnKSA/ICRzaG93X2FsdCA6ICcwJzsKCQkJJHNo
b3dfdGl0bGUgID0gKCRzaG93X3RpdGxlID09ICcxJykgPyAkc2hvd190aXRsZSA6ICcwJzsK
CQkJJHNob3dfY2xhc3MgID0gKCRzaG93X2NsYXNzID09ICcxJykgPyAkc2hvd19jbGFzcyA6
ICcwJzsKCgkJCSR0aGVfY2xhc3MgICA9IHByZWdfcmVwbGFjZSgiLyhefCZcUys7KXwoPFte
Pl0qPikvVSIsICcnLCBkdW1iRG93bigkdGhlX2NsYXNzKSk7CgkJCSRjdXN0b21fZm9ybSA9
IHNhbml0aXplRm9yVXJsKCRjdXN0b21fZm9ybSk7CgoJCQlpZiAoZW1wdHkoJGFkbWluX3Bv
cHVwX3dpZHRoKSkKCQkJewoJCQkJJGFkbWluX3BvcHVwX3dpZHRoID0gJzcyNSc7CgkJCX0K
CgkJCWlmIChlbXB0eSgkYWRtaW5fcG9wdXBfaGVpZ2h0KSkKCQkJewoJCQkJJGFkbWluX3Bv
cHVwX2hlaWdodCA9ICc0MDAnOwoJCQl9CgoJCQlzYWZlX3VwZGF0ZSgndHhwX3ByZWZzJywg
InZhbCA9ICckc2hvd193aWR0aCciLCAibmFtZSA9ICd1cG1faW1nX3BvcHBlcl9zaG93X3dp
ZHRoJyIpOwoJCQlzYWZlX3VwZGF0ZSgndHhwX3ByZWZzJywgInZhbCA9ICckc2hvd19oZWln
aHQnIiwgIm5hbWUgPSAndXBtX2ltZ19wb3BwZXJfc2hvd19oZWlnaHQnIik7CgkJCXNhZmVf
dXBkYXRlKCd0eHBfcHJlZnMnLCAidmFsID0gJyRzaG93X2FsdCciLCAibmFtZSA9ICd1cG1f
aW1nX3BvcHBlcl9zaG93X2FsdCciKTsKCQkJc2FmZV91cGRhdGUoJ3R4cF9wcmVmcycsICJ2
YWwgPSAnJHNob3dfdGl0bGUnIiwgIm5hbWUgPSAndXBtX2ltZ19wb3BwZXJfc2hvd190aXRs
ZSciKTsKCQkJc2FmZV91cGRhdGUoJ3R4cF9wcmVmcycsICJ2YWwgPSAnJHNob3dfY2xhc3Mn
IiwgIm5hbWUgPSAndXBtX2ltZ19wb3BwZXJfc2hvd19jbGFzcyciKTsKCQkJc2FmZV91cGRh
dGUoJ3R4cF9wcmVmcycsICJ2YWwgPSAnJHRoZV9jbGFzcyciLCAibmFtZSA9ICd1cG1faW1n
X3BvcHBlcl90aGVfY2xhc3MnIik7CgkJCXNhZmVfdXBkYXRlKCd0eHBfcHJlZnMnLCAidmFs
ID0gJyRjdXN0b21fZm9ybSciLCAibmFtZSA9ICd1cG1faW1nX3BvcHBlcl9jdXN0b21fZm9y
bSciKTsKCgkJCXNhZmVfdXBkYXRlKCd0eHBfcHJlZnMnLCAidmFsID0gJyRzaG93X2Zvcm0n
IiwgIm5hbWUgPSAndXBtX2ltZ19wb3BwZXJfc2hvd19mb3JtJyIpOwoJCQlzYWZlX3VwZGF0
ZSgndHhwX3ByZWZzJywgInZhbCA9ICckYWRtaW5fcG9wdXBfd2lkdGgnIiwgIm5hbWUgPSAn
dXBtX2ltZ19wb3BwZXJfYWRtaW5fcG9wdXBfd2lkdGgnIik7CgkJCXNhZmVfdXBkYXRlKCd0
eHBfcHJlZnMnLCAidmFsID0gJyRhZG1pbl9wb3B1cF9oZWlnaHQnIiwgIm5hbWUgPSAndXBt
X2ltZ19wb3BwZXJfYWRtaW5fcG9wdXBfaGVpZ2h0JyIpOwoKCQkJJHByZWZzID0gZ2V0X3By
ZWZzKCk7CgkJfQoKCQllY2hvIG4ubi4nPGRpdiBzdHlsZT0ibWFyZ2luOiAzZW0gYXV0byBh
dXRvIGF1dG87IHdpZHRoOiAyMGVtOyI+Jy4KCgkJbi5uLmhlZCh1cG1faW1nX3BvcHBlcl9n
VHh0KCdwcmVmcycpLCAnMScpLgoKCQluLm4uZm9ybSgKCQkJbi5lSW5wdXQoJ3VwbV9pbWdf
cG9wcGVyX3ByZWZzJykuCgkJCW4uc0lucHV0KCd1cGRhdGUnKS4KCgkJCW4ubi50YWcoCgkJ
CQluLm4udGFnKHVwbV9pbWdfcG9wcGVyX2dUeHQoJ3B1YmxpY19zaWRlJyksICdsZWdlbmQn
KS4KCgkJCQluLm4uZ3JhZigKCQkJCQl1cG1faW1nX3BvcHBlcl9nVHh0KCdzaG93X3dpZHRo
JykuYnIuCgkJCQkJbi55ZXNub1JhZGlvKCdzaG93X3dpZHRoJywgJHByZWZzWyd1cG1faW1n
X3BvcHBlcl9zaG93X3dpZHRoJ10pCgkJCQkpLgoKCQkJCW4ubi5ncmFmKAoJCQkJCXVwbV9p
bWdfcG9wcGVyX2dUeHQoJ3Nob3dfaGVpZ2h0JykuYnIuCgkJCQkJbi55ZXNub1JhZGlvKCdz
aG93X2hlaWdodCcsICRwcmVmc1sndXBtX2ltZ19wb3BwZXJfc2hvd19oZWlnaHQnXSkKCQkJ
CSkuCgoJCQkJbi5uLmdyYWYoCgkJCQkJdXBtX2ltZ19wb3BwZXJfZ1R4dCgnc2hvd19hbHQn
KS5ici4KCQkJCQluLnllc25vUmFkaW8oJ3Nob3dfYWx0JywgJHByZWZzWyd1cG1faW1nX3Bv
cHBlcl9zaG93X2FsdCddKQoJCQkJKS4KCgkJCQluLm4uZ3JhZigKCQkJCQl1cG1faW1nX3Bv
cHBlcl9nVHh0KCdzaG93X3RpdGxlJykuYnIuCgkJCQkJbi55ZXNub1JhZGlvKCdzaG93X3Rp
dGxlJywgJHByZWZzWyd1cG1faW1nX3BvcHBlcl9zaG93X3RpdGxlJ10pCgkJCQkpLgoKCQkJ
CW4ubi5ncmFmKAoJCQkJCXVwbV9pbWdfcG9wcGVyX2dUeHQoJ3Nob3dfY2xhc3MnKS5ici4K
CQkJCQluLnllc25vUmFkaW8oJ3Nob3dfY2xhc3MnLCAkcHJlZnNbJ3VwbV9pbWdfcG9wcGVy
X3Nob3dfY2xhc3MnXSkKCQkJCSkuCgoJCQkJbi5uLmdyYWYoCgkJCQkJdXBtX2ltZ19wb3Bw
ZXJfZ1R4dCgndGhlX2NsYXNzJykuYnIuCgkJCQkJbi5mSW5wdXQoJ3RleHQnLCAndGhlX2Ns
YXNzJywgJHByZWZzWyd1cG1faW1nX3BvcHBlcl90aGVfY2xhc3MnXSwgJ2VkaXQnKQoJCQkJ
KS4KCgkJCQluLm4uZ3JhZigKCQkJCQl1cG1faW1nX3BvcHBlcl9nVHh0KCdjdXN0b21fZm9y
bScpLmJyLgoJCQkJCW4uZklucHV0KCd0ZXh0JywgJ2N1c3RvbV9mb3JtJywgJHByZWZzWyd1
cG1faW1nX3BvcHBlcl9jdXN0b21fZm9ybSddLCAnZWRpdCcpCgkJCQkpCgkJCSwgJ2ZpZWxk
c2V0JykuCgoJCQluLm4udGFnKAoJCQkJbi5uLnRhZyh1cG1faW1nX3BvcHBlcl9nVHh0KCdh
ZG1pbl9zaWRlJyksICdsZWdlbmQnKS4KCgkJCQluLm4uZ3JhZigKCQkJCQl1cG1faW1nX3Bv
cHBlcl9nVHh0KCdzaG93X2Zvcm0nKS5ici4KCQkJCQluLnllc25vUmFkaW8oJ3Nob3dfZm9y
bScsICRwcmVmc1sndXBtX2ltZ19wb3BwZXJfc2hvd19mb3JtJ10pCgkJCQkpLgoKCQkJCW4u
bi5ncmFmKAoJCQkJCXVwbV9pbWdfcG9wcGVyX2dUeHQoJ2FkbWluX3BvcHVwX3dpZHRoJyku
YnIuCgkJCQkJbi5mSW5wdXQoJ3RleHQnLCAnYWRtaW5fcG9wdXBfd2lkdGgnLCAkcHJlZnNb
J3VwbV9pbWdfcG9wcGVyX2FkbWluX3BvcHVwX3dpZHRoJ10sICdlZGl0JykKCQkJCSkuCgoJ
CQkJbi5uLmdyYWYoCgkJCQkJdXBtX2ltZ19wb3BwZXJfZ1R4dCgnYWRtaW5fcG9wdXBfaGVp
Z2h0JykuYnIuCgkJCQkJbi5mSW5wdXQoJ3RleHQnLCAnYWRtaW5fcG9wdXBfaGVpZ2h0Jywg
JHByZWZzWyd1cG1faW1nX3BvcHBlcl9hZG1pbl9wb3B1cF9oZWlnaHQnXSwgJ2VkaXQnKQoJ
CQkJKQoKCQkJLCAnZmllbGRzZXQnKS4KCgkJCW4ubi5mSW5wdXQoJ3N1Ym1pdCcsICd1cGRh
dGUnLCAnVXBkYXRlJywgJ3NtYWxsZXJib3gnKQoKCQkpLm4ubi4nPC9kaXY+JzsKCX0KCi8v
IC0tLQoKCWZ1bmN0aW9uIHVwbV9pbWdfcG9wcGVyX2luc3RhbGwoKQoJewoJCWdsb2JhbCAk
cHJlZnM7CgoJCSR1cGRhdGVkID0gZmFsc2U7CgoJCSRzZXR0aW5ncyA9ICJwcmVmc19pZCA9
IDEsIHR5cGUgPSAyLCBldmVudCA9ICdhZG1pbicsIHBvc2l0aW9uID0gMCI7CgoJCWlmICgh
aXNzZXQoJHByZWZzWyd1cG1faW1nX3BvcHBlcl9zaG93X3dpZHRoJ10pKQoJCXsKCQkJc2Fm
ZV9pbnNlcnQoJ3R4cF9wcmVmcycsICIKCQkJCW5hbWUgPSAndXBtX2ltZ19wb3BwZXJfc2hv
d193aWR0aCcsCgkJCQl2YWwgPSAnMScsCgkJCQlodG1sID0gJ3llc25vcmFkaW8nLAoJCQkJ
JHNldHRpbmdzCgkJCSIpOwoKCQkJJHVwZGF0ZWQgPSB0cnVlOwoJCX0KCgkJaWYgKCFpc3Nl
dCgkcHJlZnNbJ3VwbV9pbWdfcG9wcGVyX3Nob3dfaGVpZ2h0J10pKQoJCXsKCQkJc2FmZV9p
bnNlcnQoJ3R4cF9wcmVmcycsICIKCQkJCW5hbWUgPSAndXBtX2ltZ19wb3BwZXJfc2hvd19o
ZWlnaHQnLAoJCQkJdmFsID0gJzEnLAoJCQkJaHRtbCA9ICd5ZXNub3JhZGlvJywKCQkJCSRz
ZXR0aW5ncwoJCQkiKTsKCgkJCSR1cGRhdGVkID0gdHJ1ZTsKCQl9CgoJCWlmICghaXNzZXQo
JHByZWZzWyd1cG1faW1nX3BvcHBlcl9zaG93X2FsdCddKSkKCQl7CgkJCXNhZmVfaW5zZXJ0
KCd0eHBfcHJlZnMnLCAiCgkJCQluYW1lID0gJ3VwbV9pbWdfcG9wcGVyX3Nob3dfYWx0JywK
CQkJCXZhbCA9ICcxJywKCQkJCWh0bWwgPSAneWVzbm9yYWRpbycsCgkJCQkkc2V0dGluZ3MK
CQkJIik7CgoJCQkkdXBkYXRlZCA9IHRydWU7CgkJfQoKCQlpZiAoIWlzc2V0KCRwcmVmc1sn
dXBtX2ltZ19wb3BwZXJfc2hvd190aXRsZSddKSkKCQl7CgkJCXNhZmVfaW5zZXJ0KCd0eHBf
cHJlZnMnLCAiCgkJCQluYW1lID0gJ3VwbV9pbWdfcG9wcGVyX3Nob3dfdGl0bGUnLAoJCQkJ
dmFsID0gJzEnLAoJCQkJaHRtbCA9ICd5ZXNub3JhZGlvJywKCQkJCSRzZXR0aW5ncwoJCQki
KTsKCgkJCSR1cGRhdGVkID0gdHJ1ZTsKCQl9CgoJCWlmICghaXNzZXQoJHByZWZzWyd1cG1f
aW1nX3BvcHBlcl9zaG93X2NsYXNzJ10pKQoJCXsKCQkJc2FmZV9pbnNlcnQoJ3R4cF9wcmVm
cycsICIKCQkJCW5hbWUgPSAndXBtX2ltZ19wb3BwZXJfc2hvd19jbGFzcycsCgkJCQl2YWwg
PSAnMScsCgkJCQlodG1sID0gJ3llc25vcmFkaW8nLAoJCQkJJHNldHRpbmdzCgkJCSIpOwoK
CQkJJHVwZGF0ZWQgPSB0cnVlOwoJCX0KCgkJaWYgKCFpc3NldCgkcHJlZnNbJ3VwbV9pbWdf
cG9wcGVyX3RoZV9jbGFzcyddKSkKCQl7CgkJCXNhZmVfaW5zZXJ0KCd0eHBfcHJlZnMnLCAi
CgkJCQluYW1lID0gJ3VwbV9pbWdfcG9wcGVyX3RoZV9jbGFzcycsCgkJCQl2YWwgPSAnaW1h
Z2UnLAoJCQkJaHRtbCA9ICd0ZXh0X2lucHV0JywKCQkJCSRzZXR0aW5ncwoJCQkiKTsKCgkJ
CSR1cGRhdGVkID0gdHJ1ZTsKCQl9CgoJCWlmICghaXNzZXQoJHByZWZzWyd1cG1faW1nX3Bv
cHBlcl9jdXN0b21fZm9ybSddKSkKCQl7CgkJCXNhZmVfaW5zZXJ0KCd0eHBfcHJlZnMnLCAi
CgkJCQluYW1lID0gJ3VwbV9pbWdfcG9wcGVyX2N1c3RvbV9mb3JtJywKCQkJCXZhbCA9ICd1
cG1faW1nX3BvcHBlcicsCgkJCQlodG1sID0gJ3RleHRfaW5wdXQnLAoJCQkJJHNldHRpbmdz
CgkJCSIpOwoKCQkJJHVwZGF0ZWQgPSB0cnVlOwoJCX0KCgkJaWYgKCFpc3NldCgkcHJlZnNb
J3VwbV9pbWdfcG9wcGVyX3Nob3dfZm9ybSddKSkKCQl7CgkJCXNhZmVfaW5zZXJ0KCd0eHBf
cHJlZnMnLCAiCgkJCQluYW1lID0gJ3VwbV9pbWdfcG9wcGVyX3Nob3dfZm9ybScsCgkJCQl2
YWwgPSAnMScsCgkJCQlodG1sID0gJ3llc25vcmFkaW8nLAoJCQkJJHNldHRpbmdzCgkJCSIp
OwoKCQkJJHVwZGF0ZWQgPSB0cnVlOwoJCX0KCgkJaWYgKCFpc3NldCgkcHJlZnNbJ3VwbV9p
bWdfcG9wcGVyX2FkbWluX3BvcHVwX3dpZHRoJ10pKQoJCXsKCQkJc2FmZV9pbnNlcnQoJ3R4
cF9wcmVmcycsICIKCQkJCW5hbWUgPSAndXBtX2ltZ19wb3BwZXJfYWRtaW5fcG9wdXBfd2lk
dGgnLAoJCQkJdmFsID0gJzcyNScsCgkJCQlodG1sID0gJ3RleHRfaW5wdXQnLAoJCQkJJHNl
dHRpbmdzCgkJCSIpOwoKCQkJJHVwZGF0ZWQgPSB0cnVlOwoJCX0KCgkJaWYgKCFpc3NldCgk
cHJlZnNbJ3VwbV9pbWdfcG9wcGVyX2FkbWluX3BvcHVwX2hlaWdodCddKSkKCQl7CgkJCXNh
ZmVfaW5zZXJ0KCd0eHBfcHJlZnMnLCAiCgkJCQluYW1lID0gJ3VwbV9pbWdfcG9wcGVyX2Fk
bWluX3BvcHVwX2hlaWdodCcsCgkJCQl2YWwgPSAnNDAwJywKCQkJCWh0bWwgPSAndGV4dF9p
bnB1dCcsCgkJCQkkc2V0dGluZ3MKCQkJIik7CgoJCQkkdXBkYXRlZCA9IHRydWU7CgkJfQoK
CQlpZiAoJHVwZGF0ZWQpCgkJewoJCQkkR0xPQkFMU1sncHJlZnMnXSA9IGdldF9wcmVmcygp
OwoJCX0KCX0KCi8vIC0tLQoKCWZ1bmN0aW9uIHVwbV9pbWdfcG9wcGVyX2dUeHQoJHdoYXQs
ICRhdHRzID0gYXJyYXkoKSkKCXsKCQkkbGFuZyA9IGFycmF5KAoJCQknYWRtaW5fcG9wdXBf
d2lkdGgnICAgICA9PiAnUG9wdXAgd2lkdGgnLAoJCQknYWRtaW5fcG9wdXBfaGVpZ2h0JyAg
ICA9PiAnUG9wdXAgaGVpZ2h0JywKCQkJJ2FkbWluX3NpZGUnICAgICAgICAgICAgPT4gJ0Fk
bWluJywKCQkJJ2FsdF90ZXh0X2ZvcicJCT0+ICdBbHRlcm5hdGUgdGV4dCBmb3InLAoJCQkn
YXJ0aWNsZV9pbWFnZV9hcHBlbmQnCT0+ICdBcnRpY2xlIGltYWdlIChhcHBlbmQpJywKCQkJ
J2FydGljbGVfaW1hZ2VfcmVwbGFjZScgPT4gJ0FydGljbGUgaW1hZ2UgKHJlcGxhY2UpJywK
CQkJJ2Fzc2lnbl9jbGFzcycJCT0+ICdhc3NpZ24gY2xhc3MnLAoJCQknYnVpbHRfaW4nCQk9
PiAnQnVpbHQtaW4nLAoJCQknY2FwdGlvbl9mb3InCQk9PiAnQ2FwdGlvbiBmb3InLAoJCQkn
Y2hlY2tfbGVhdmUnCQk9PiAnWW91IGhhdmUgbWFkZSBjaGFuZ2VzIHRvIHRoZSBjdXJyZW50
IHBvc3Qgd2hpY2ggeW91IGhhdmUgbm90IHNhdmVkLiBDb250aW51ZSB3aXRob3V0IHNhdmlu
Zz8nLAoJCQknY29uZmlybV9vdmVyd3JpdGUnCT0+ICdZb3UgaGF2ZSBtb3JlIHRoYW4gb25l
IGFydGljbGUgaW1hZ2UgZGVmaW5lZC4gVGhpcyBhY3Rpb24gd2lsbCBvdmVyd3JpdGUgdGhl
IGVudGlyZSBsaXN0LiBDb250aW51ZT8nLAoJCQknY3VzdG9tX2Zvcm0nCQk9PiAnQ3VzdG9t
IGZvcm0nLAoJCQknZmFpbGVkJwkJPT4gJ0luc2VydCBmYWlsZWQuJywKCQkJJ2ZvcicJCQk9
PiAnZm9yJywKCQkJJ2ltYWdlJwkJCT0+ICdJbWFnZScsCgkJCSdpbWFnZV9zZWxlY3RvcicJ
PT4gJ0ltYWdlIFNlbGVjdG9yJywKCQkJJ2luY2x1ZGUnCQk9PiAnaW5jbHVkZScsCgkJCSdp
bmNsdWRlX2FsdCcJCT0+ICdpbmNsdWRlIGFsdCB0ZXh0JywKCQkJJ2luY2x1ZGVfY2FwdGlv
bicJPT4gJ2luY2x1ZGUgY2FwdGlvbicsCgkJCSdpbmNsdWRlX2hlaWdodCcJPT4gJ2luY2x1
ZGUgaGVpZ2h0JywKCQkJJ2luY2x1ZGVfd2lkdGgnCQk9PiAnaW5jbHVkZSB3aWR0aCcsCgkJ
CSdpbnNlcnQnCQk9PiAnSW5zZXJ0JywKCQkJJ2luc2VydF9pbWFnZScJCT0+ICdJbnNlcnQg
SW1hZ2UnLAoJCQknaW5zZXJ0X3BsdWdpbicJCT0+ICdJbnNlcnQgKHVwbV9pbWFnZSknLAoJ
CQknbm9fdGh1bWJuYWlsJwkJPT4gJ1RodW1ibmFpbCBub3QgZm91bmQuJywKCQkJJ292ZXJy
aWRlJwkJPT4gJ292ZXJyaWRlcyBhbGwgb3B0aW9uYWwgcGFyYW1ldGVycycsCgkJCSdwb3B1
cCcJCQk9PiAnUG9wdXAnLAoJCQkncHJlZnMnCQkJPT4gJ3VwbV9pbWdfcG9wcGVyIFByZWZl
cmVuY2VzJywKCQkJJ3B1YmxpY19zaWRlJyAgICAgICAgICAgPT4gJ1B1YmxpYycsCgkJCSdy
ZXR1cm4nCQk9PiAnUmV0dXJuIHRvIGVkaXRpbmcgdGhlIHBvc3Q/JywKCQkJJ3Nob3dfYWx0
JwkJPT4gJ1Nob3cgYWx0ZXJuYXRlIHRleHQ/JywKCQkJJ3Nob3dfY2xhc3MnCQk9PiAnU2hv
dyBjbGFzcz8nLAoJCQknc2hvd19oZWlnaHQnCQk9PiAnU2hvdyBoZWlnaHQ/JywKCQkJJ3No
b3dfdGl0bGUnCQk9PiAnU2hvdyBjYXB0aW9uPycsCgkJCSdzaG93X3dpZHRoJwkJPT4gJ1No
b3cgd2lkdGg/JywKCQkJJ3Nob3dfZm9ybScJCT0+ICdTaG93IGN1c3RvbWl6YXRpb24gb3B0
aW9ucyBpbiBwb3B1cD8nLAoJCQknc3VjY2VzcycJCT0+ICdTdWNjZXNzLicsCgkJCSd0aGVf
Y2xhc3MnCQk9PiAnVGhlIGNsYXNzJywKCQkJJ3ZpZXdfYWxsJwkJPT4gJ1ZpZXcgQWxsJwoJ
CSk7CgoJCXJldHVybiBzdHJ0cigkbGFuZ1skd2hhdF0sICRhdHRzKTsKCX0KCglmdW5jdGlv
biBuYXZfZm9ybV91cG0oJGV2ZW50LCAkYm0sICRwYWdlLCAkbnVtUGFnZXMsICRzb3J0LCAk
ZGlyLCAkY3JpdCwgJHNlYXJjaF9tZXRob2QsICR0b3RhbD0wLCAkbGltaXQ9MCwgJHN0ZXA9
J2xpc3QnKQoJewoJCWdsb2JhbCAkdGhlbWU7CgkJaWYgKCRjcml0ICE9ICcnICYmICR0b3Rh
bCA+IDEpCgkJewoJCQkkb3V0W10gPSAkdGhlbWUtPmFubm91bmNlKAoJCQkJZ1R4dCgnc2hv
d2luZ19zZWFyY2hfcmVzdWx0cycsCgkJCQkJYXJyYXkoCgkJCQkJCSd7ZnJvbX0nICA9PiAo
KCRwYWdlIC0gMSkgKiAkbGltaXQpICsgMSwKCQkJCQkJJ3t0b30nICAgID0+IG1pbigkdG90
YWwsICRwYWdlICogJGxpbWl0KSwKCQkJCQkJJ3t0b3RhbH0nID0+ICR0b3RhbAoJCQkJCQkp
CgkJCQkJKQoJCQkJKTsKCQl9CgoJCWlmICgkbnVtUGFnZXMgPiAxKQoJCXsKCQkJJG9wdGlv
bl9saXN0ID0gYXJyYXkoKTsKCgkJCWZvciAoJGkgPSAxOyAkaSA8PSAkbnVtUGFnZXM7ICRp
KyspCgkJCXsKCQkJCWlmICgkaSA9PSAkcGFnZSkKCQkJCXsKCQkJCQkkb3B0aW9uX2xpc3Rb
XSA9ICc8b3B0aW9uIHZhbHVlPSInLiRpLiciIHNlbGVjdGVkPSJzZWxlY3RlZCI+Jy4iJGkv
JG51bVBhZ2VzIi4nPC9vcHRpb24+JzsKCQkJCX0KCgkJCQllbHNlCgkJCQl7CgkJCQkJJG9w
dGlvbl9saXN0W10gPSAnPG9wdGlvbiB2YWx1ZT0iJy4kaS4nIj4nLiIkaS8kbnVtUGFnZXMi
Lic8L29wdGlvbj4nOwoJCQkJfQoJCQl9CgoJCQkkbmF2ID0gYXJyYXkoKTsKCgkJCSRuYXZb
XSA9ICgkcGFnZSA+IDEpID8KCQkJCVByZXZOZXh0TGluaygkZXZlbnQsICRwYWdlIC0gMSwg
Z1R4dCgncHJldicpLCAncHJldicsICRzb3J0LCAkZGlyLCAkY3JpdCwgJHNlYXJjaF9tZXRo
b2QsICRzdGVwKS5zcCA6CgkJCQl0YWcoZ1R4dCgncHJldicpLCAnc3BhbicsICcgY2xhc3M9
Im5hdmxpbmstZGlzYWJsZWQiJykuc3A7CgoJCQkkbmF2W10gPSAnPHNlbGVjdCBuYW1lPSJw
YWdlIiBvbmNoYW5nZT0ic3VibWl0KHRoaXMuZm9ybSk7Ij4nOwoJCQkkbmF2W10gPSBuLmpv
aW4obiwgJG9wdGlvbl9saXN0KTsKCQkJJG5hdltdID0gbi4nPC9zZWxlY3Q+JzsKCgkJCSRu
YXZbXSA9ICgkcGFnZSAhPSAkbnVtUGFnZXMpID8KCQkJCXNwLlByZXZOZXh0TGluaygkZXZl
bnQsICRwYWdlICsgMSwgZ1R4dCgnbmV4dCcpLCAnbmV4dCcsICRzb3J0LCAkZGlyLCAkY3Jp
dCwgJHNlYXJjaF9tZXRob2QsICRzdGVwKSA6CgkJCQlzcC50YWcoZ1R4dCgnbmV4dCcpLCAn
c3BhbicsICcgY2xhc3M9Im5hdmxpbmstZGlzYWJsZWQiJyk7CgoJCQkkb3V0W10gPSAnPGZv
cm0gY2xhc3M9Im5hdi1mb3JtIiBtZXRob2Q9ImdldCIgYWN0aW9uPSJpbmRleC5waHAiPicu
CgkJCQluLmVJbnB1dCgkZXZlbnQpLgoJCQkJbi5oSW5wdXQoJ2JtJywgJGJtKS4KCQkJCW4u
c0lucHV0KCRzdGVwKS4KCQkJCSggJHNvcnQgPyBuLmhJbnB1dCgnc29ydCcsICRzb3J0KS5u
LmhJbnB1dCgnZGlyJywgJGRpcikgOiAnJyApLgoJCQkJKCAoJGNyaXQgIT0gJycpID8gbi5o
SW5wdXQoJ2NyaXQnLCAkY3JpdCkubi5oSW5wdXQoJ3NlYXJjaF9tZXRob2QnLCAkc2VhcmNo
X21ldGhvZCkgOiAnJyApLgoJCQkJJzxwIGNsYXNzPSJwcmV2LW5leHQiPicuCgkJCQlqb2lu
KCcnLCAkbmF2KS4KCQkJCSc8L3A+Jy4KCQkJCW4udElucHV0KCkuCgkJCQluLic8L2Zvcm0+
JzsKCQl9CgkJZWxzZQoJCXsKCQkJJG91dFtdID0gZ3JhZigkcGFnZS4nLycuJG51bVBhZ2Vz
LCAnIGNsYXNzPSJwcmV2LW5leHQiJyk7CgkJfQoKCQlyZXR1cm4gam9pbihuLCAkb3V0KTsK
CX0iO3M6MzoibWQ1IjtzOjMyOiIxMTBiYzEyOTVmNzE2N2NlYTA3NjgxYWExNGFhN2EzMSI7
fQ==
